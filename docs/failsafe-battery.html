<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Battery Failsafe &mdash; Copter  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/common_theme_override.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon_copter.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/./useralerts.js"></script>
        <script data-domain="ardupilot.org" defer="defer" src="https://plausible.ardupilot.org/js/script.outbound-links.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="GCS Failsafe" href="gcs-failsafe.html" />
    <link rel="prev" title="Radio Failsafe" href="radio-failsafe.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Copter
              <img src="../_static/ardupilot_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="copter-introduction.html">Copter简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-autopilots.html">选择飞控</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-GCS.html">地面站软件</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="initial-setup.html">首次设置</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="common-install-gcs.html">安装地面站软件</a></li>
<li class="toctree-l2"><a class="reference internal" href="autopilot-assembly-instructions.html">飞控系统安装</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-loading-firmware-onto-pixhawk.html">将固件加载到有ArduPilot固件的板子</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-loading-firmware-onto-chibios-only-boards.html">将固件加载到没有ArduPilot固件的板子</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-connect-mission-planner-autopilot.html">连接Mission Planner和飞控</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="configuring-hardware.html">配置</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="common-basic-operation.html">基本系统概述</a></li>
<li class="toctree-l3"><a class="reference internal" href="frame-type-configuration.html">机型配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="connect-escs-and-motors.html">电机编号和方向</a></li>
<li class="toctree-l3"><a class="reference internal" href="common-radio-control-calibration.html">RC校准</a></li>
<li class="toctree-l3"><a class="reference internal" href="common-accelerometer-calibration.html">加速度计校准</a></li>
<li class="toctree-l3"><a class="reference internal" href="common-compass-calibration-in-mission-planner.html">指南针校准</a></li>
<li class="toctree-l3"><a class="reference internal" href="common-rc-transmitter-flight-mode-configuration.html">遥控器飞行模式设置</a></li>
<li class="toctree-l3"><a class="reference internal" href="esc-calibration.html">电调校准</a></li>
<li class="toctree-l3"><a class="reference internal" href="set-motor-range.html">配置电机范围（可选）</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="failsafe-landing-page.html">故障保护机制</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="radio-failsafe.html">Radio Failsafe</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Battery Failsafe</a></li>
<li class="toctree-l4"><a class="reference internal" href="gcs-failsafe.html">GCS Failsafe</a></li>
<li class="toctree-l4"><a class="reference internal" href="ekf-inav-failsafe.html">EKF Failsafe</a></li>
<li class="toctree-l4"><a class="reference internal" href="deadreckoning-failsafe.html">Dead Reckoning Failsafe</a></li>
<li class="toctree-l4"><a class="reference internal" href="vibration-failsafe.html">Vibration Failsafe</a></li>
<li class="toctree-l4"><a class="reference internal" href="tkoff-rpm-min.html">Dead Motor Takeoff Prevention</a></li>
<li class="toctree-l4"><a class="reference internal" href="terrain-following.html">Terrain Data Loss Failsafe (see section on loss of terrain data induced RTL)</a></li>
<li class="toctree-l4"><a class="reference internal" href="crash_check.html">Crash Check</a></li>
<li class="toctree-l4"><a class="reference internal" href="common-parachute.html">Parachute</a></li>
<li class="toctree-l4"><a class="reference internal" href="common-watchdog.html">Independent Watchdog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="flight-modes.html">飞行模式</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="flying-arducopter.html">首次飞行和调试</a></li>
<li class="toctree-l1"><a class="reference internal" href="traditional-helicopters.html">传统直升机</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-mission-planning.html">任务规划</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-when-problems-arise.html">如果出现问题</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-advanced-configuration.html">高级配置</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-optional-hardware.html">可选硬件</a></li>
<li class="toctree-l1"><a class="reference internal" href="additional-information.html">附加信息</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-user-alerts.html">用户警报</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Copter</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="initial-setup.html">首次设置</a></li>
          <li class="breadcrumb-item"><a href="configuring-hardware.html">必要硬件配置</a></li>
          <li class="breadcrumb-item"><a href="failsafe-landing-page.html">Failsafe</a></li>
      <li class="breadcrumb-item active">Battery Failsafe</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="battery-failsafe">
<span id="failsafe-battery"></span><h1>Battery Failsafe<a class="headerlink" href="#battery-failsafe" title="Permalink to this heading">¶</a></h1>
<p>The battery failsafe can be configured to automatically switch the vehicle into <a class="reference internal" href="rtl-mode.html#rtl-mode"><span class="std std-ref">RTL</span></a>, <a class="reference internal" href="smartrtl-mode.html#smartrtl-mode"><span class="std std-ref">SmartRTL</span></a> or <a class="reference internal" href="land-mode.html#land-mode"><span class="std std-ref">Land</span></a> mode if the vehicle battery voltage drops below a specified voltage for 10 seconds or the estimated remaining capacity has dropped below a configurable threshold.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This failsafe requires the vehicle have a working <a class="reference internal" href="common-powermodule-landingpage.html#common-powermodule-landingpage"><span class="std std-ref">Power Module</span></a>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>ArduPilot firmware versions 4.0 and later support up to 9 batteries/power monitors. The discussion below applies to those optional batteries also. Each can trigger a failsafe and each can have different actions and setup values. In addition, a group of batteries can be treated as a single unit, see <code class="docutils literal notranslate"><span class="pre">BATTx_MONITOR</span></code> = 10.</p>
</div>
<section id="when-the-failsafe-will-trigger">
<h2>When the failsafe will trigger<a class="headerlink" href="#when-the-failsafe-will-trigger" title="Permalink to this heading">¶</a></h2>
<p>If enabled and set-up correctly the battery failsafe will trigger if the main battery’s</p>
<ul class="simple">
<li><p>voltage drops below the voltage held in the <a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#batt-low-volt" title="(in Rover)"><span class="xref std std-ref">BATT_LOW_VOLT</span></a> parameter (or FS_BATT_VOLTAGE in older versions) for more than 10 seconds. The default voltage is 10.5 volts. If set to zero, the voltage based trigger will be disabled.</p></li>
<li><p>remaining capacity falls below the <a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#batt-low-mah" title="(in Rover)"><span class="xref std std-ref">BATT_LOW_MAH</span></a> parameter (or FS_BATT_MAH in older versions) 20% of the battery’s full capacity is a good choice (i.e. “1000” for a 5000mAh battery). If set to zero, the capacity based trigger will be disabled (i.e. only voltage will be used)</p></li>
</ul>
</section>
<section id="what-will-happen">
<h2>What will happen<a class="headerlink" href="#what-will-happen" title="Permalink to this heading">¶</a></h2>
<p>When the failsafe is triggered:</p>
<ul class="simple">
<li><p>Buzzer will play a loud low-battery alarm</p></li>
<li><p>LEDs will flash yellow</p></li>
<li><p>“Low Battery!” will be displayed on the ground stations HUD (if telemetry is connected)</p></li>
</ul>
<p>Then one of the following will happen:</p>
<ul class="simple">
<li><p><strong>Nothing</strong> if the vehicle is already disarmed or executing RTL or Land</p></li>
<li><p><strong>Disarm motors</strong> if the vehicle is in Stabilize or Acro mode and the throttle is at zero OR the vehicle is landed</p></li>
<li><p>The user configurable action held in the <a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#batt-fs-low-act" title="(in Rover)"><span class="xref std std-ref">BATT_FS_LOW_ACT</span></a> parameter</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p><strong>0</strong> : None - no action will be taken</p></li>
<li><p><strong>1</strong> : Land - the vehicle will switch to <a class="reference internal" href="land-mode.html#land-mode"><span class="std std-ref">Land</span></a> mode</p></li>
<li><p><strong>2</strong> : RTL - the vehicle will switch to <a class="reference internal" href="rtl-mode.html#rtl-mode"><span class="std std-ref">Return-to-Launch</span></a> mode if possible but if not possible (because of no good position estimate) the vehicle will <a class="reference internal" href="land-mode.html#land-mode"><span class="std std-ref">Land</span></a> (<strong>Recommended</strong>)</p></li>
<li><p><strong>3</strong> : SmartRTL or RTL - the vehicle will switch to <a class="reference internal" href="smartrtl-mode.html#smartrtl-mode"><span class="std std-ref">SmartRTL</span></a> mode if possible, if not possible (because SmartRTL’s position buffer is full) the vehicle will switch to <a class="reference internal" href="rtl-mode.html#rtl-mode"><span class="std std-ref">RTL</span></a>. If RTL is also not possible (because of no good position estimate) the vehicle will switch to <a class="reference internal" href="land-mode.html#land-mode"><span class="std std-ref">Land</span></a></p></li>
<li><p><strong>4</strong> : SmartRTL or Land - the vehicle will switch to <a class="reference internal" href="smartrtl-mode.html#smartrtl-mode"><span class="std std-ref">SmartRTL</span></a> mode if possible, if not possible (because SmartRTL’s position buffer is full) the vehicle will switch to <a class="reference internal" href="land-mode.html#land-mode"><span class="std std-ref">Land</span></a></p></li>
<li><p><strong>5</strong> : Terminate - the vehicle will disarm the motors. This is a dangerous option that should not be used in most cases</p></li>
</ul>
</div></blockquote>
<p>As with all failsafes, the user can re-take control of the vehicle by changing the flight mode switch to another mode. The battery failsafe will not trigger again unless the two-layer failsafe is setup (see below)</p>
<p>The <a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#fs-options" title="(in Rover)"><span class="xref std std-ref">FS_OPTIONS</span></a> parameter (Copter 4.0 and later) is a bitmask parameter to select one or more options that modify the standard actions of the radio, GCS, and battery failsafe. In the Mission Planner full parameter list or full parameter tree, the handy checkbox popup window is an easy way to set this (and any other bitmask) parameter. Be sure to go to Help &gt; Check Beta Updates to pull the latest parameter definitions first while connected to the internet. The <a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#fs-options" title="(in Rover)"><span class="xref std std-ref">FS_OPTIONS</span></a> bits are as follows:</p>
<ul class="simple">
<li><p>bit 0 set: Continue if in auto mode on <a class="reference internal" href="radio-failsafe.html#radio-failsafe"><span class="std std-ref">Radio Failsafe</span></a></p></li>
<li><p>bit 1 set: Continue if in auto mode on <a class="reference internal" href="gcs-failsafe.html#gcs-failsafe"><span class="std std-ref">Ground Control Station Failsafe</span></a></p></li>
<li><p>bit 2 set: Continue if in guided mode <a class="reference internal" href="radio-failsafe.html#radio-failsafe"><span class="std std-ref">Radio Failsafe</span></a></p></li>
<li><p>bit 3 set: Continue if landing on any failsafe</p></li>
<li><p>bit 4 set: Continue in pilot control on <a class="reference internal" href="gcs-failsafe.html#gcs-failsafe"><span class="std std-ref">Ground Control Station Failsafe</span></a></p></li>
<li><p>if none of the above are set, then execute the <a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#batt-fs-low-act" title="(in Rover)"><span class="xref std std-ref">BATT_FS_LOW_ACT</span></a> or <a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#batt-fs-crt-act" title="(in Rover)"><span class="xref std std-ref">BATT_FS_CRT_ACT</span></a> options as configured.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only bitmask bit 3 affects actions taken during Battery failsafe. This parameter also works in conjunction with the GCS and radio failsafe, so ensure you are taking all options into account when setting this parameter.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Even if the failsafe action is set to “None” (i.e. <a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#batt-fs-low-act" title="(in Rover)"><span class="xref std std-ref">BATT_FS_LOW_ACT</span></a> = 0) the buzzer will buzz and the LEDs will flash yellow. To completely disable the battery failsafe set <a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#batt-low-volt" title="(in Rover)"><span class="xref std std-ref">BATT_LOW_VOLT</span></a> and <a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#batt-low-mah" title="(in Rover)"><span class="xref std std-ref">BATT_LOW_MAH</span></a> to zero.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Once the battery failsafe has triggered, it cannot be reset until the autopilot is rebooted.</p>
</div>
</section>
<section id="setting-up-using-mission-planner">
<h2>Setting up using Mission Planner<a class="headerlink" href="#setting-up-using-mission-planner" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>On the <strong>INITIAL SETUP | Mandatory Hardware | Failsafe</strong> page:</p>
<ul>
<li><p>If the Battery section parameters are greyed out follow instructions to setup the <a class="reference internal" href="common-powermodule-landingpage.html#common-powermodule-landingpage"><span class="std std-ref">Power Module</span></a></p></li>
<li><p>Set the “Low Battery” threshold voltage (i.e. 10.5 volts)</p></li>
<li><p>Set the “Reserved MAH” or leave as “0” if the failsafe should never trigger based on estimated current consumed.</p></li>
<li><p>Select the desired behavior (Land, RTL, SmartRTL, etc) from the drop-down list</p></li>
</ul>
</li>
</ul>
<a class="reference external image-reference" href="../_images/Failsafe_Battery_Setup.png"><img alt="../_images/Failsafe_Battery_Setup.png" src="../_images/Failsafe_Battery_Setup.png" /></a>
</section>
<section id="two-layer-failsafe">
<h2>Two-Layer failsafe<a class="headerlink" href="#two-layer-failsafe" title="Permalink to this heading">¶</a></h2>
<p>ArduPilot includes a two-layer battery failsafe. This allows setting up a follow-up action if the battery voltage or remaining capacity falls below an even lower threshold.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#batt-crt-volt" title="(in Rover)"><span class="xref std std-ref">BATT_CRT_VOLT</span></a> - holds the secondary (lower) voltage threshold. Set to zero to disable.</p></li>
<li><p><a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#batt-crt-mah" title="(in Rover)"><span class="xref std std-ref">BATT_CRT_MAH</span></a> - holds the secondary (lower) capacity threshold. Set to zero to disable.</p></li>
<li><p><a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#batt-fs-crt-act" title="(in Rover)"><span class="xref std std-ref">BATT_FS_CRT_ACT</span></a> - holds the secondary action to take. A reasonable setup would be to have <a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#batt-fs-low-act" title="(in Rover)"><span class="xref std std-ref">BATT_FS_LOW_ACT</span></a> = 2 (RTL) and <a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#batt-fs-crt-act" title="(in Rover)"><span class="xref std std-ref">BATT_FS_CRT_ACT</span></a> = 1 (Land)</p></li>
</ul>
</section>
<section id="advanced-settings">
<h2>Advanced Settings<a class="headerlink" href="#advanced-settings" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#batt-fs-voltsrc" title="(in Rover)"><span class="xref std std-ref">BATT_FS_VOLTSRC</span></a> allows configuring whether the raw battery voltage or a sag corrected voltage is used</p></li>
<li><p><a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#batt-low-timer" title="(in Rover)"><span class="xref std std-ref">BATT_LOW_TIMER</span></a> can configure how long the voltage must be below the threshold for the failsafe to trigger</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BATTx_</span></code> parameters can be setup to trigger the failsafe on other batteries</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="radio-failsafe.html" class="btn btn-neutral float-left" title="Radio Failsafe" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="gcs-failsafe.html" class="btn btn-neutral float-right" title="GCS Failsafe" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, ArduPilot Dev Team.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>