<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Servo &mdash; Copter  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/common_theme_override.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon_copter.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/./useralerts.js"></script>
        <script data-domain="ardupilot.org" defer="defer" src="https://plausible.ardupilot.org/js/script.outbound-links.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Copter
              <img src="../_static/ardupilot_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="copter-introduction.html">Copter简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-autopilots.html">选择飞控</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-GCS.html">地面站软件</a></li>
<li class="toctree-l1"><a class="reference internal" href="initial-setup.html">首次设置</a></li>
<li class="toctree-l1"><a class="reference internal" href="flying-arducopter.html">首次飞行和调试</a></li>
<li class="toctree-l1"><a class="reference internal" href="traditional-helicopters.html">传统直升机</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-mission-planning.html">任务规划</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-when-problems-arise.html">如果出现问题</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-advanced-configuration.html">高级配置</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-optional-hardware.html">可选硬件</a></li>
<li class="toctree-l1"><a class="reference internal" href="additional-information.html">附加信息</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-user-alerts.html">用户警报</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Copter</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Servo</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="servo">
<span id="common-servo"></span><h1>Servo<a class="headerlink" href="#servo" title="Permalink to this heading">¶</a></h1>
<p>Copter, Plane and Rover can control servos for any purpose, including:
triggering a camera shutter, releasing a parachute or dropping a tennis
ball.  These servo(s) can be controlled either directly by the pilot via
a switch on the transmitter, through commands sent from the ground
station or as part of a mission.</p>
<p>Either
<a class="reference external" href="https://www.amazon.com/Hitec-31055S-HS-55-Economy-Universal/dp/B0006O3WNW">analog</a>
or <a class="reference external" href="https://www.amazon.com/Hitec-RCD-35076S-HS-A5076HB-Digital/dp/B003RXHMNK">digital servos</a>
may be used.</p>
<section id="connecting-the-servo-to-an-autopilot">
<h2>Connecting the servo to an AutoPilot<a class="headerlink" href="#connecting-the-servo-to-an-autopilot" title="Permalink to this heading">¶</a></h2>
<a class="reference external image-reference" href="../_images/Servo_Pixhawk.jpg"><img alt="../_images/Servo_Pixhawk.jpg" src="../_images/Servo_Pixhawk.jpg" /></a>
<ul class="simple">
<li><p>If using Copter Connect the servo to AUX OUT 1, 2, 3 or 4.  MAIN OUT
1 ~ 8 should be avoided because these update at 400hz.</p></li>
<li><p>If using Plane or Rover where all PWM outputs update at <a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#servo-rate" title="(in Rover)"><span class="xref std std-ref">SERVO_RATE</span></a>, which defaults to 50hz, any unused
MAIN OUT or AUX OUT 1 ~ 4 may be used.</p></li>
<li><p>AUX OUT 5 and 6 cannot be used by default because they are setup as
<a class="reference internal" href="common-relay.html#common-relay"><span class="std std-ref">Relays</span></a>.  These pins can changed to Servo
outputs by setting the <code class="docutils literal notranslate"><span class="pre">BRD_PWM_COUNT</span></code> parameter to 6 and setting
<a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#relay-pin" title="(in Rover)"><span class="xref std std-ref">RELAY_PIN</span></a> and <a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#relay-pin2" title="(in Rover)"><span class="xref std std-ref">RELAY_PIN2</span></a> to -1.</p></li>
<li><p>The Pixhawk autopilot cannot provide power to the servos so
an external BEC or ESC that can provide 5V should be used.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>in firmware versions 4.2 and later, the method for setting a PWM/SERVO/MOTOR output to be a GPIO function is changed. Instead of <code class="docutils literal notranslate"><span class="pre">BRD_PWM_COUNT</span></code> being used, the individual <code class="docutils literal notranslate"><span class="pre">SERVOx_FUNCTION</span></code> parameter is merely set to “-1”. If set to “0”, it remains a PWM output, unassigned to a function, and outputs that output’s trim value when board safety is not active. If the servo function is being “mirrored” to a remote device, as in the case of a DroneCAN or KDECAN ESC, then in order to change the autopilot board’s corresponding output pin to be a GPIO, but allow the <code class="docutils literal notranslate"><span class="pre">SERVOx_FUNCTION</span></code> to still be assigned to the remote device, the <a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#servo-gpio-mask" title="(in Rover)"><span class="xref std std-ref">SERVO_GPIO_MASK</span></a> parameter can be used to assign the board pin to be a GPIO without affecting the <code class="docutils literal notranslate"><span class="pre">SERVOx_FUNCTION</span></code> assignment for the remote device.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>when using digital servos they can provide faster and more precise control if a higher update rate for the PWM outputs is used by setting the <a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#servo-rate" title="(in Rover)"><span class="xref std std-ref">SERVO_RATE</span></a>  to a higher value such as 100Hz, 333Hz or even 400Hz, depending on the capabilities of the servos being used. This value affects <strong>all</strong> PWM outputs, other than motor control outputs, so only do this if all of the servos on the vehicle are digital servos that support this higher rate.</p>
</div>
</section>
<section id="controlling-the-servo-as-a-camera-shutter">
<h2>Controlling the servo as a camera shutter<a class="headerlink" href="#controlling-the-servo-as-a-camera-shutter" title="Permalink to this heading">¶</a></h2>
<p>Details on how to set-up and control the servo as if it were triggering
the shutter of a camera can be found  <a class="reference external" href="https://ardupilot.org/copter/docs/common-camera-gimbal.html#common-camera-gimbal" title="(in Copter)"><span class="xref std std-ref">here on the Camera Gimbal wiki page</span></a>.  The
advantage of this set-up is:</p>
<ul class="simple">
<li><p>the servo can be triggered from the ch7 or ch8 auxiliary switch on
Copter</p></li>
<li><p>if you wish the servo to move to one position, delay for a moment
then return to its original position this can all be accomplished
with a single mission command</p></li>
<li><p>the location and attitude of the copter will be recorded to the
dataflash each time the servo is triggered</p></li>
</ul>
<p>The disadvantage of using the camera shutter method is the servo can
only be moved to two pre-configured positions.</p>
<p>Video example of a tennis ball dropped used at <a class="reference external" href="https://www.youtube.com/watch?v=C_vwC1r3k2g">Sparkfun’s AVC 2012</a>.</p>
<div class="video_wrapper" style="padding-bottom: 56.250000%; padding-top: 30px; position: relative; width: 100%">
<iframe allowfullscreen="true" src="https://www.youtube.com/embed/AG9OwXj4Ev4" style="border: 0; height: 100%; left: 0; position: absolute; top: 0; width: 100%">
</iframe></div></section>
<section id="controlling-the-servo-as-a-servo">
<h2>Controlling the servo as a servo<a class="headerlink" href="#controlling-the-servo-as-a-servo" title="Permalink to this heading">¶</a></h2>
<p>The traditional way to control a servo only works as part of a mission
(i.e. AUTO mode).  Follow these instructions:</p>
<ul>
<li><p>Connect to your autopilot from the ground station</p></li>
<li><p>On the Config/Tuning &gt; Full Parameter List page, ensure that the SERVOx_FUNCTION (or RCx_FUNCTION) is set to zero for the servo (i.e. <a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#servo9-function" title="(in Rover)"><span class="xref std std-ref">SERVO9_FUNCTION</span></a> = 0 if the servo is connected a Pixhawks AUX OUT2).</p></li>
<li><p>Press the Write Params button</p>
<a class="reference external image-reference" href="../_images/MissionPlanner_ServoSetup.jpg"><img alt="../_images/MissionPlanner_ServoSetup.jpg" src="../_images/MissionPlanner_ServoSetup.jpg" /></a>
</li>
<li><p>Create the mission you wish to fly and add a DO_SET_SERVO command
and include the servo number (i.e. “10”) in the “Ser No” field and
the PWM value (usually between 1000 ~ 2000) in the “PWM” field.</p>
<a class="reference external image-reference" href="../_images/mp_move_servo.jpg"><img alt="../_images/mp_move_servo.jpg" src="../_images/mp_move_servo.jpg" /></a>
</li>
</ul>
<p>Note that the DO_SET_SERVO command is a “do command” meaning that it
can only be run between waypoints so it must not be the first or last
command in the mission.  It will be executed immediately after the
waypoint that precedes it.</p>
</section>
<section id="testing-with-the-mission-planner">
<h2>Testing with the Mission Planner<a class="headerlink" href="#testing-with-the-mission-planner" title="Permalink to this heading">¶</a></h2>
<p>The mission planner’s Flight Data screen includes a “Servo” tab on the
bottom right that can be used to test that the servos are moving
correctly.</p>
<a class="reference external image-reference" href="../_images/Servo_TestingWithMP.jpg"><img alt="../_images/Servo_TestingWithMP.jpg" src="../_images/Servo_TestingWithMP.jpg" style="width: 450px;" /></a>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, ArduPilot Dev Team.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>