<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>[copywiki destination=”plane”] &mdash; Copter  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/common_theme_override.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon_copter.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/./useralerts.js"></script>
        <script data-domain="ardupilot.org" defer="defer" src="https://plausible.ardupilot.org/js/script.outbound-links.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Copter
              <img src="../_static/ardupilot_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="copter-introduction.html">Copter简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-autopilots.html">选择飞控</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-GCS.html">地面站软件</a></li>
<li class="toctree-l1"><a class="reference internal" href="initial-setup.html">首次设置</a></li>
<li class="toctree-l1"><a class="reference internal" href="flying-arducopter.html">首次飞行和调试</a></li>
<li class="toctree-l1"><a class="reference internal" href="traditional-helicopters.html">传统直升机</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-mission-planning.html">任务规划</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-when-problems-arise.html">如果出现问题</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-advanced-configuration.html">高级配置</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-optional-hardware.html">可选硬件</a></li>
<li class="toctree-l1"><a class="reference internal" href="additional-information.html">附加信息</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-user-alerts.html">用户警报</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Copter</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">[copywiki destination=”plane”]</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="copywiki-destination-plane">
<span id="common-ice"></span><h1>[copywiki destination=”plane”]<a class="headerlink" href="#copywiki-destination-plane" title="Permalink to this heading">¶</a></h1>
</section>
<section id="internal-combustion-engines-ice">
<h1>Internal Combustion Engines (ICE)<a class="headerlink" href="#internal-combustion-engines-ice" title="Permalink to this heading">¶</a></h1>
<div class="video_wrapper" style="padding-bottom: 56.250000%; padding-top: 30px; position: relative; width: 100%">
<iframe allowfullscreen="true" src="https://www.youtube.com/embed/RjjF_S69Ywk" style="border: 0; height: 100%; left: 0; position: absolute; top: 0; width: 100%">
</iframe></div><p>Canberra UAV’s petrol powered tricopter.  <a class="reference external" href="https://discuss.ardupilot.org/t/petrol-boosted-tricopter/17823">See blog post here</a></p>
<p>Internal combustion engines can increase flight times but care must be taken to handle the extra complexity and increased vibration.</p>
<section id="what-to-buy">
<h2>What to Buy<a class="headerlink" href="#what-to-buy" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Gas motor and ignition module</p></li>
<li><p>RC Switch for controlling power to ignition module like <a class="reference external" href="http://milehighrc.com/switch.html">this one from milehighrc.com</a></p></li>
<li><p>Optionally an electric starter like <a class="reference external" href="http://milehighrc.com/EME_E_Start.html">this one from milehighrc.com</a></p></li>
</ul>
</section>
<section id="connection-and-configuration">
<h2>Connection and Configuration<a class="headerlink" href="#connection-and-configuration" title="Permalink to this heading">¶</a></h2>
<p>The engine’s ignition power switch and (optional) starter should be connected to the autopilot’s servo outputs, <code class="docutils literal notranslate"><span class="pre">Ignition</span></code> and <code class="docutils literal notranslate"><span class="pre">Starter</span></code> (see ICE section in <a class="reference internal" href="common-rcoutput-mapping.html#common-rcoutput-mapping"><span class="std std-ref">Autopilot Output Functions</span></a>).</p>
<ul class="simple">
<li><p>Set <a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#ice-enable" title="(in Plane)"><span class="xref std std-ref">ICE_ENABLE</span></a> = 1 to enable the ICE feature (you may need to reload parameters after setting this in order to see below parameters)</p></li>
<li><p>Set <a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#ice-start-chan" title="(in Plane)"><span class="xref std std-ref">ICE_START_CHAN</span></a> to the channel number corresponding to a switch on the transmitter which will be used to start the engine. This channel can start the engine or stop the engine via the <code class="docutils literal notranslate"><span class="pre">Ignition</span></code> and <code class="docutils literal notranslate"><span class="pre">Starter</span></code> outputs. Normally, the “kill” PWM value is anything below 1300us, but this can be changed using the <a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#ice-startchn-min" title="(in Plane)"><span class="xref std std-ref">ICE_STARTCHN_MIN</span></a> parameter. Setting up this channel and its RC control is required for operation in order to provide a “kill” function on the throttle, even if there is no ignition or starter control.</p></li>
</ul>
<p>These parameters may also need to be adjusted:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#ice-pwm-strt-on" title="(in Plane)"><span class="xref std std-ref">ICE_PWM_STRT_ON</span></a> is the PWM value sent to the starter to start the engine</p></li>
<li><p><a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#ice-starter-time" title="(in Plane)"><span class="xref std std-ref">ICE_STARTER_TIME</span></a> is the time (in seconds) that the starter motor should run to start the engine</p></li>
<li><p><a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#ice-pwm-ign-on" title="(in Plane)"><span class="xref std std-ref">ICE_PWM_IGN_ON</span></a> is the PWM value sent to the ignition power switch when the engine should be running</p></li>
<li><p><a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#ice-pwm-ign-off" title="(in Plane)"><span class="xref std std-ref">ICE_PWM_IGN_OFF</span></a> is the PWM value sent to the ignition power switch when the engine should be stopped</p></li>
<li><p><a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#ice-startchn-min" title="(in Plane)"><span class="xref std std-ref">ICE_STARTCHN_MIN</span></a> is the minimum PWM below which the start channel input will be ignored. This is a safety feature to prevent bad RC input from stopping the motor while the aircraft is beyond line of sight, if the RC protocol is incorrectly configured. Default is zero, meaning disabled.</p></li>
</ul>
<p>If using an onboard starter, it is important to configure an RPM sensor for the engine. This will allow the ArduPilot to detect an in-flight engine failure and attempt to restart the engine. ArduPilot supports generic pulse tachometers connected to GPIO pins (such as the Aux servo pins on a PixHawk or Cube). A tachometer may be made using a simple hall effect switch IC. Alternatively, some ignition modules support a tachometer output that can be connected directly to the GPIO pins. Desert Aircraft Electronic Ignition V2 modules support tachometer output on the signal pin of the power input connector. Note that when connecting an RPM sensor to an AUX pin, it is important to make sure that this pin is not configured to output a PWM value and, instead, be a GPIO pin. See <a class="reference internal" href="common-gpios.html#common-gpios"><span class="std std-ref">GPIOs</span></a>.</p>
<p>In order to configure an RPM sensor, the following parameters must be set:</p>
<ul class="simple">
<li><p>Set <a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#rpm1-type" title="(in Rover)"><span class="xref std std-ref">RPM1_TYPE</span></a> to 2 for a standard GPIO input pin.</p></li>
<li><p>Set <a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#rpm1-pin" title="(in Rover)"><span class="xref std std-ref">RPM1_PIN</span></a> to the appropriate value for the auxiliary pin you are using.</p></li>
<li><p>Set the remaining ‘RPM_*’ parameters as appropriate for your system.</p></li>
<li><p>Set <a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#ice-rpm-chan" title="(in Plane)"><span class="xref std std-ref">ICE_RPM_CHAN</span></a> to 1.</p></li>
</ul>
<p>Throttle control for an ICE engine is similar to controlling a standard brushless ESC. The throttle servo can be connected to any servo output with a <code class="docutils literal notranslate"><span class="pre">SERVOx_FUNCTION</span></code> set to 70 (Channel 3 is configured this way by default). It is important to set the Min and Max PWM values on this servo output to be within the mechanical limits of your throttle assembly (using <code class="docutils literal notranslate"><span class="pre">SERVOx_MIN</span></code> and <code class="docutils literal notranslate"><span class="pre">SERVOx_MAX</span></code>). While doing this, also verify that the servo moves in the correct direction with respect to manual throttle input. Note that the throttle servo will not move unless the vehicle is armed. It is recommended to arm the vehicle with ignition power disconnected in order to test the throttle servo.</p>
<p>After configuring the limits of your throttle servo, the following parameters must be set:</p>
<ul class="simple">
<li><p>Set <a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#thr-min" title="(in Plane)"><span class="xref std std-ref">THR_MIN</span></a> to the desired setting at idle. This will be found empirically during engine testing.</p></li>
<li><p>Set <a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#thr-slewrate" title="(in Plane)"><span class="xref std std-ref">THR_SLEWRATE</span></a> to a value appropriate for your engine. 20%/s is a good starting point.</p></li>
<li><p>Set <a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#thr-max" title="(in Plane)"><span class="xref std std-ref">THR_MAX</span></a> if you would like to prevent your engine from reaching full throttle.</p></li>
</ul>
<p>If you are using a quadplane and would like the ICE engine to be disabled during a VTOL descent to reduce the risk of prop strikes, set <a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#q-land-ice-cut" title="(in Plane)"><span class="xref std std-ref">Q_LAND_ICE_CUT</span></a> to 1.</p>
</section>
<section id="advanced-starter-configuration">
<h2>Advanced Starter Configuration<a class="headerlink" href="#advanced-starter-configuration" title="Permalink to this heading">¶</a></h2>
<p>A variety of parameters are available for configuring the engine start routine. The auto-start functionality will attempt to start the engine any time the vehicle is armed, the engine is enabled, and the measured RPM is below the <a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#ice-rpm-thresh" title="(in Plane)"><span class="xref std std-ref">ICE_RPM_THRESH</span></a>. If the engine is not successfully started within a configurable amount of time, the program will wait for a configurable delay before attempting to start again. It is important to remember that the starter will run in pulses. DO NOT approach the engine between failed start attempts as the starter will attempt to start again if the engine is still enabled.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#ice-start-pct" title="(in Plane)"><span class="xref std std-ref">ICE_START_PCT</span></a> overrides the throttle setting during start.</p></li>
<li><p><a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#ice-starter-time" title="(in Plane)"><span class="xref std std-ref">ICE_START_TIME</span></a> controls the maximum amount of time the starter will run in each start attempt.</p></li>
<li><p><a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#ice-start-delay" title="(in Plane)"><span class="xref std std-ref">ICE_START_DELAY</span></a> sets a delay between start attempts. This can be useful when your starter has a limited duty cycle.</p></li>
<li><p><a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#ice-rpm-thresh" title="(in Plane)"><span class="xref std std-ref">ICE_RPM_THRESH</span></a> sets the minimum RPM reading for the engine to be considered running. This should be set to a value below your idle RPM.</p></li>
</ul>
<p>To allow the pilot to directly control the ignition and (optional) starter from the transmitter, RC pass-through should be set up:</p>
<ul class="simple">
<li><p>Set <code class="docutils literal notranslate"><span class="pre">SERVOx_FUNCTION</span></code> (where “x” is the autopilot’s output channel connected to the ignition or starter) to <code class="docutils literal notranslate"><span class="pre">RCINy</span></code> (where “y” is the transmitter channel).  For example set <a class="reference external" href="https://ardupilot.org/rover/docs/parameters.html#servo8-function" title="(in Rover)"><span class="xref std std-ref">SERVO8_FUNCTION</span></a> = 59/”RCIN9” to allow the transmitter’s channel 9 to control the autopilot Output 8</p></li>
</ul>
<p>Be sure to check the engine’s behavior when the transmitter is turned off to simulate what will happen during an RC failsafe.</p>
</section>
<section id="starting-and-stopping-the-motor">
<h2>Starting and Stopping the Motor<a class="headerlink" href="#starting-and-stopping-the-motor" title="Permalink to this heading">¶</a></h2>
<p>When using the ArduPilot ICE library to control an engine, the engine can be enabled or disabled using an RC switch, via MAVLink command, or via a mission command. Typically, a 3 position switch on an RC transmitter is used to control the engine. This switch has the following three positions:</p>
<ul class="simple">
<li><p>Low: Force the engine to be disabled. This ignores MAVLink commands and mission items that attempt to control the engine’s state.</p></li>
<li><p>Mid: Keep the current state of the engine, but allow MAVLink commands and mission items to change the state of the engine.</p></li>
<li><p>High: Force the engine to be enabled. This ignores MAVLink commands and mission items that attempt to control the engine’s state.</p></li>
</ul>
<p>If an <a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#ice-start-chan" title="(in Plane)"><span class="xref std std-ref">ICE_START_CHAN</span></a> is not configured, the behavior will be the same as when the switch is in the middle position.</p>
<p>To start the motor with RC control:</p>
<ul class="simple">
<li><p>Arm the vehicle</p></li>
<li><p>Raise the transmitter’s starter switch to start the motor</p></li>
<li><p>If the engine does not include a starter motor, use a hand-held starter motor to start it</p></li>
</ul>
<p>To stop the motor with RC control:</p>
<ul class="simple">
<li><p>Lower the transmitter’s starter switch</p></li>
<li><p>Disarm the vehicle</p></li>
</ul>
<p>QuadPlanes can also automatically stop the engine once the final phase of a VTOL landing is entered by setting the <a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#q-land-ice-cut" title="(in Plane)"><span class="xref std std-ref">Q_LAND_ICE_CUT</span></a> parameter to 1.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The engine can be started and stopped in autonomous missions by using the <code class="docutils literal notranslate"><span class="pre">DO_ENGINE_CONTROL</span></code> mission command. This useful preceding NAV_VTOL_TAKEOFF or NAV_VTOL_LAND to start or stop the engine to prevent prop strikes while landing in wind with a low clearance prop. See <a class="reference internal" href="common-mavlink-mission-command-messages-mav_cmd.html#common-mavlink-mission-command-messages-mav-cmd"><span class="std std-ref">Mission Commands</span></a> section.</p>
</div>
</section>
<section id="idle-and-redline-governors">
<h2>Idle and redline governors<a class="headerlink" href="#idle-and-redline-governors" title="Permalink to this heading">¶</a></h2>
<p>These features rely on having a source for engine RPM. See <a class="reference internal" href="common-rpm.html#common-rpm"><span class="std std-ref">RPM Measurement</span></a> for more information.</p>
<p>The idle governor allows the autopilot to adjust the throttle to maintain an RPM value when the commanded throttle is low. This can be useful when the engine is waiting for takeoff and reduces the workload on the pilot during that time. Increasing the throttle command will give the expected throttle response.</p>
<p><a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#ice-idle-pct" title="(in Plane)"><span class="xref std std-ref">ICE_IDLE_PCT</span></a> This is the minimum percentage throttle output while running, this includes being disarmed, but not while outputs are disabled by the safety switch .
- <a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#ice-idle-rpm" title="(in Plane)"><span class="xref std std-ref">ICE_IDLE_RPM</span></a> This configures the RPM that will be commanded by the idle governor. Set to -1 to disable.
- <a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#ice-idle-db" title="(in Plane)"><span class="xref std std-ref">ICE_IDLE_DB</span></a> This configures the RPM deadband that is tolerated before adjusting the idle setpoint.
- <a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#ice-idle-slew" title="(in Plane)"><span class="xref std std-ref">ICE_IDLE_SLEW</span></a> This configures the slewrate used to adjust the idle setpoint in percentage points per second</p>
<p>The redline governor will slowly reduce the throttle if the RPM remains above the given RPM value. Generally, this RPM value is provided by the manufacturer of the engine. If the commanded throttle drops faster or lower than the point the governor started, then the governor will be released and normal control of the throttle will return to normal throttle response. A warning message will appear on the GCS. Setting <a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#ice-options" title="(in Plane)"><span class="xref std std-ref">ICE_OPTIONS</span></a> bit 1 allows disabling the throttle actions of the redline governor, but still displays the GCS warning message.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#ice-redline-rpm" title="(in Plane)"><span class="xref std std-ref">ICE_REDLINE_RPM</span></a> Maximum RPM for the engine provided by the manufacturer. A value of 0 disables this feature.</p></li>
</ul>
</section>
<section id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this heading">¶</a></h2>
<p>Several options are provided using the <a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#ice-options" title="(in Plane)"><span class="xref std std-ref">ICE_OPTIONS</span></a> bitmask parameter:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Bit (Set to enable)</p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>Set ignition output to <a class="reference external" href="https://ardupilot.org/plane/docs/parameters.html#ice-pwm-ign-off" title="(in Plane)"><span class="xref std std-ref">ICE_PWM_IGN_OFF</span></a> during any RC failsafe</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Disable the Redline Governor feature (but still display GCS warnings)</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>Allows throttle servo output while disarmed in MANUAL mode</p></td>
</tr>
</tbody>
</table>
</section>
<section id="vibration-isolation">
<h2>Vibration isolation<a class="headerlink" href="#vibration-isolation" title="Permalink to this heading">¶</a></h2>
<p>The high vibration from internal combustion engines means that <a class="reference internal" href="common-vibration-damping.html#common-vibration-damping"><span class="std std-ref">vibration dampening</span></a> is critical.  It is often necessary to mount the autopilot on a plate with <a class="reference external" href="https://www.amazon.com/Great-Planes-Segmented-Weights-6-Ounce/dp/B0015KLJE0">self-adhesive lead weights</a> added to increase its mass.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, ArduPilot Dev Team.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>