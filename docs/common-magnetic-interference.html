<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Magnetic Interference &mdash; Copter  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/common_theme_override.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon_copter.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/./useralerts.js"></script>
        <script data-domain="ardupilot.org" defer="defer" src="https://plausible.ardupilot.org/js/script.outbound-links.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Loading Firmware" href="common-loading-firmware-onto-pixhawk.html" />
    <link rel="prev" title="[copywiki destination=”plane,copter,rover,blimp”]" href="common-installing-3dr-ublox-gps-compass-module.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Copter
              <img src="../_static/ardupilot_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="copter-introduction.html">Copter简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-autopilots.html">选择飞控</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-GCS.html">地面站软件</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="initial-setup.html">首次设置</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="common-install-gcs.html">安装地面站软件</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="autopilot-assembly-instructions.html">飞控系统安装</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="common-mounting-the-flight-controller.html">Mounting the Autopilot</a></li>
<li class="toctree-l3"><a class="reference internal" href="common-flight-controller-wiring.html">Autopilot Wiring</a></li>
<li class="toctree-l3"><a class="reference internal" href="common-navio2-wiring-and-quick-start.html">NAVIO2 (Linux based) Wiring QuickStart</a></li>
<li class="toctree-l3"><a class="reference internal" href="connect-escs-and-motors.html">ESCs and Motors</a></li>
<li class="toctree-l3"><a class="reference internal" href="common-installing-3dr-ublox-gps-compass-module.html">[copywiki destination=”plane,copter,rover,blimp”]</a></li>
<li class="toctree-l3"><a class="reference internal" href="common-installing-3dr-ublox-gps-compass-module.html#ublox-gps-compass-module">UBlox GPS + Compass Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="common-installing-3dr-ublox-gps-compass-module.html#connecting-the-autopilot">Connecting the Autopilot</a></li>
<li class="toctree-l3"><a class="reference internal" href="common-installing-3dr-ublox-gps-compass-module.html#mounting-the-gps-module">Mounting the GPS Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="common-installing-3dr-ublox-gps-compass-module.html#setup-in-mission-planner">Setup in Mission Planner</a></li>
<li class="toctree-l3"><a class="reference internal" href="common-installing-3dr-ublox-gps-compass-module.html#led-indicators">LED Indicators</a></li>
<li class="toctree-l3"><a class="reference internal" href="common-installing-3dr-ublox-gps-compass-module.html#advanced-configuration">Advanced Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="common-vibration-damping.html">Vibration Damping</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Magnetic Interference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hardware-changes-to-reduce-magnetic-interference-on-the-compass">Hardware changes to reduce magnetic interference on the compass</a></li>
<li class="toctree-l4"><a class="reference internal" href="#maxwell-s-equations-the-magnetic-field-on-the-axis-of-a-current-loop">Maxwell’s Equations - The Magnetic Field on the Axis of a Current Loop</a></li>
<li class="toctree-l4"><a class="reference internal" href="#natural-and-artificial-magnetic-anomalies-warning">Natural and Artificial Magnetic Anomalies Warning</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gps-for-yaw">GPS for yaw</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="common-loading-firmware-onto-pixhawk.html">将固件加载到有ArduPilot固件的板子</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-loading-firmware-onto-chibios-only-boards.html">将固件加载到没有ArduPilot固件的板子</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-connect-mission-planner-autopilot.html">连接Mission Planner和飞控</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuring-hardware.html">配置</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="flying-arducopter.html">首次飞行和调试</a></li>
<li class="toctree-l1"><a class="reference internal" href="traditional-helicopters.html">传统直升机</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-mission-planning.html">任务规划</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-when-problems-arise.html">如果出现问题</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-advanced-configuration.html">高级配置</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-optional-hardware.html">可选硬件</a></li>
<li class="toctree-l1"><a class="reference internal" href="additional-information.html">附加信息</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-user-alerts.html">用户警报</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Copter</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="initial-setup.html">首次设置</a></li>
          <li class="breadcrumb-item"><a href="autopilot-assembly-instructions.html">飞控系统安装 Instructions</a></li>
      <li class="breadcrumb-item active">Magnetic Interference</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="magnetic-interference">
<span id="common-magnetic-interference"></span><h1>Magnetic Interference<a class="headerlink" href="#magnetic-interference" title="Permalink to this heading">¶</a></h1>
<p>This article covers general information related to magnetic
interference.</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h2>
<p>Magnet Interference on a compass can have a serious impact on navigation
on all vehicle types.</p>
<p>This article explains what hardware changes you can make to reduce
magnetic interference on the compass, along with supporting theoretical
discussion. Information on how to set-up your compass can be found on
<a class="reference internal" href="common-compass-setup-advanced.html#common-compass-setup-advanced"><span class="std std-ref">Advanced Compass Setup</span></a>.</p>
<p>[site wiki=”copter”]On Copter magnetic interference can cause circling
(also known as “toiletbowling”) in Loiter, RTL, AUTO flight
modes.[/site]</p>
<p>See also <a class="reference external" href="https://en.wikipedia.org/wiki/Magnetic_declination">Magnetic Declination</a>
(wikipedia)</p>
</section>
<section id="hardware-changes-to-reduce-magnetic-interference-on-the-compass">
<h2>Hardware changes to reduce magnetic interference on the compass<a class="headerlink" href="#hardware-changes-to-reduce-magnetic-interference-on-the-compass" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>The best way method is to use an <a class="reference internal" href="common-external-magnetometer-for-improved-performance.html#common-external-magnetometer-for-improved-performance"><span class="std std-ref">external compass</span></a>
or <a class="reference internal" href="common-installing-3dr-ublox-gps-compass-module.html#common-installing-3dr-ublox-gps-compass-module"><span class="std std-ref">GPS+Compass</span></a>
module mounted on a mast up and away from magnetic source of
interference including the power distribution board (PDB).</p></li>
<li><p>Keep the wires between the PDB, ESCs and battery as short as
possible.  The wires from the ESCs to the motors are less important
because they are AC and produce less interference.</p></li>
<li><p>Twist the wires between the PDB, ESC and battery and use grounded
shielding where possible.</p></li>
<li><p>Replace the PDB and ESCs with a 4-in-1 ESC because they tend to
produce less interference probably because their wires are shorter
and closer together and they also have an aluminum plate on top which
may help reduce the interference.</p></li>
<li><p>Add aluminum shielding (even gutter tape) around the wires from the
ESC to the motors may reduce the AC interference.  Aluminum will not
help reduce the primary DC interference from the PDB, ESCs and the
wires connecting them.</p></li>
</ol>
<a class="reference external image-reference" href="../_images/3281_dimg2.jpg"><img alt="../_images/3281_dimg2.jpg" src="../_images/3281_dimg2.jpg" /></a>
</section>
<section id="maxwell-s-equations-the-magnetic-field-on-the-axis-of-a-current-loop">
<h2>Maxwell’s Equations - The Magnetic Field on the Axis of a Current Loop<a class="headerlink" href="#maxwell-s-equations-the-magnetic-field-on-the-axis-of-a-current-loop" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Geometric details (from <a class="reference external" href="http://hyperphysics.phy-astr.gsu.edu/%E2%80%8Chbase/magnetic/curloo.html#c2">this web
page.</a>)</p>
<p><a class="reference external" href="../_images/loopa.gif"><img alt="loopa" src="../_images/loopa.gif" /></a></p>
</td>
<td><p>The application of
the <a class="reference external" href="http://hyperphysics.phy-astr.gsu.edu/%E2%80%8Chbase/magnetic/biosav.html#c1">Biot-Savart
law</a>
on the centerline of a <a class="reference external" href="http://hyperphysics.phy-astr.gsu.edu/%E2%80%8Chbase/magnetic/curloo.html#c1">current
loop</a> involves
integrating the z-component.</p>
<p><a class="reference external" href="../_images/loopa2.gif"><img alt="image4" src="http://hyperphysics.phy-astr.gsu.edu/%E2%80%8Chbase/magnetic/imgmag/loopa2.gif" /></a></p>
<p>The symmetry is such that all the
terms in this element are constant
except the distance element dL,
which when integrated just gives the
circumference of the circle. The
magnetic field is then:</p>
<p><a class="reference external" href="../_images/loopa3.gif"><img alt="image5" src="http://hyperphysics.phy-astr.gsu.edu/%E2%80%8Chbase/magnetic/imgmag/loopa3.gif" /></a></p>
</td>
</tr>
</tbody>
</table>
<p>There are 3 things to get from this drawing and the equation for the
magnetic field B as you move away from a current loop along the Z axis:</p>
<ol class="arabic simple">
<li><p>The magnetic field increases as a function of the enclosed loop area
Pi R^2</p>
<ul class="simple">
<li><p>Big loop = big magnetic field</p></li>
<li><p>Reduce the magnetic field by twisting the loop to close it. aka
twist the wires together and keep your return path close to the
source</p></li>
<li><p>In the case where you have a PDB and 4 ESCs you have 4 loops that
start at the Deans connector on the PDB, go out to the ESC and
return back to the Deans connector.  In the case of the 4 in 1 ESC
the current flow is much more concentrated in one area and you
don’t have the big loops so consequently you decrease the magnetic
field.</p></li>
</ul>
</li>
<li><p>The magnetic field increases as a function of current</p>
<ul class="simple">
<li><p>Where there is the option, you can deliver the same power and
decrease the magnetic field by increasing the voltage and
decreasing the current.</p></li>
</ul>
</li>
<li><p>The magnetic field decreases as a function of the cube of the
distance</p>
<ul class="simple">
<li><p>It is more complicated when you are close to the loop but when z
&gt;&gt; R the denominator goes to z^3</p></li>
</ul>
</li>
</ol>
<p>There is one more thing and that is that the direction of the magnetic
field depends on the direction that the current flows so when you rotate
a battery it changes the magnetic field produced by the current flowing
in the battery.</p>
<p>It can’t be stated enough that minimizing the enclosed loop areas and
moving the compass away from the current will help things work better
and “yes”, power distribution boards with big circular thick high
current PC traces on them produce significant semi-spherical fields as
large or larger than their diameter.</p>
</section>
<section id="natural-and-artificial-magnetic-anomalies-warning">
<h2>Natural and Artificial Magnetic Anomalies Warning<a class="headerlink" href="#natural-and-artificial-magnetic-anomalies-warning" title="Permalink to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following information has not been objectively tested to
determine its impact on a vehicle’s compass accuracy in flight.</p>
</div>
<ol class="arabic">
<li><p>Many things can distort the earth’s magnetic field in the area you
are flying:</p>
<ul class="simple">
<li><p>Steel framed or reinforced concrete buildings, bridges and
roadways, iron pipes and culverts, high power electric lines,
heavy equipment, trucks and automobiles, steel tanks, electric
motors and even computers.</p></li>
<li><p>Flying between steel framed or reinforced high rise buildings will
distort the magnetic field in addition to causing GPS
multi-pathing.</p></li>
</ul>
</li>
<li><p>Safe distances for compass calibration</p>
<ul>
<li><p>6” (15 cm) minimum: Metal rim glasses, pen/pencil, metal watch
band, pocket knife, metal zipper/buttons, belt buckle, batteries,
binoculars, cell phone, keys, camera, camcorder, survey nails,
metal tape measure.</p></li>
<li><p>18” (50 cm) minimum: Clipboard, data collector, computer, GPS
antenna, 2-way radio, hand gun, hatchet, cell phone case with
magnetic closure.</p></li>
<li><p>6 ft (2 m) minimum: Bicycle, fire hydrant, road signs, sewer cap
or drain, steel pole, ATV, guy wire, magnets, chain-link fence,
bar-wire fence, data collectors</p>
<p>that use a magnet to hold the stylus.</p>
</li>
<li><p>15 ft (5 m) minimum: Electrical box, small car/truck, powerline,
building with concrete &amp; steel.</p></li>
<li><p>30 ft (10 m) minimum: Large truck, metal building, heavy
machinery.</p></li>
</ul>
</li>
</ol>
</section>
<section id="gps-for-yaw">
<h2>GPS for yaw<a class="headerlink" href="#gps-for-yaw" title="Permalink to this heading">¶</a></h2>
<dl>
<dt>ArduPilot supports the use of GPS heading information to reduce malfunctions caused by changes in the magnetic field in certain environments.</dt><dd><ul class="simple">
<li><p><a class="reference external" href="https://ardupilot.org/copter/docs/common-gps-for-yaw.html">Configure GPS for yaw</a></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This feature is available in Copter 4.0.4 (and higher), Plane 4.0.6 (and higher) and Rover 4.1.0 (and higher);Ublox F9p must run firmware version 1.13 or higher.</p>
</div>
</dd>
</dl>
<div class="video_wrapper" style="padding-bottom: 56.250000%; padding-top: 30px; position: relative; width: 100%">
<iframe allowfullscreen="true" src="https://www.youtube.com/embed/Kh_6TynYqEI" style="border: 0; height: 100%; left: 0; position: absolute; top: 0; width: 100%">
</iframe></div></section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="common-installing-3dr-ublox-gps-compass-module.html" class="btn btn-neutral float-left" title="[copywiki destination=”plane,copter,rover,blimp”]" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="common-loading-firmware-onto-pixhawk.html" class="btn btn-neutral float-right" title="Loading Firmware" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, ArduPilot Dev Team.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>